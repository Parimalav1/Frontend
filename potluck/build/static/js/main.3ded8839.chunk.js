(this.webpackJsonpputlock=this.webpackJsonpputlock||[]).push([[0],{52:function(e,t,a){e.exports=a(79)},57:function(e,t,a){},58:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(44),r=a.n(l),o=(a(57),a(8)),u=a(3),i=(a(58),a(51)),s=function(e){var t=e.component,a=Object(i.a)(e,["component"]);return c.a.createElement(u.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?c.a.createElement(t,e):c.a.createElement(u.a,{to:"/login"})}}))},m=a(4);function p(e){var t=e.potluck,a=Object(u.g)().push;return c.a.createElement("div",null,c.a.createElement("button",{className:"Btn",onClick:function(){return a("/potluck/".concat(t.id),t)}},c.a.createElement("h1",null,"Potluck"),c.a.createElement("h2",null,t.name),c.a.createElement("h2",null,t.host),c.a.createElement("p",null,t.date,c.a.createElement("br",null)),c.a.createElement("p",null,t.time,c.a.createElement("br",null)),c.a.createElement("p",null,t.location,c.a.createElement("br",null))))}var d=a(18),b=a.n(d),h=function(){var e=localStorage.getItem("token");return console.log("token: "+e),b.a.create({headers:{Authorization:e},baseURL:"https://potluckplanner1.herokuapp.com"})},f=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){h().get("https://potluckplanner1.herokuapp.com/api/potlucks").then((function(e){l(e.data)})).catch((function(e){return console.log("ERROR")}))}),[]),a.length?c.a.createElement("div",{className:"potluck-list"},c.a.createElement(o.b,{to:"/create-potluck"},"Time to gather"),a.map((function(e){return c.a.createElement("div",{key:e.id},c.a.createElement(p,{potluck:e}))}))):c.a.createElement("div",null,"Loading potluck information...")},g=a(6),E=a(2),O=a(17),j={name:"",location:"",date:"",time:""},k={item_name:"",claimed:0,potluck_id:""},v={guest_name:""};function w(){var e=Object(u.g)().push,t=Object(n.useState)(j),a=Object(m.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)(k),i=Object(m.a)(o,2),s=i[0],p=i[1],d=Object(n.useState)([]),b=Object(m.a)(d,2),f=b[0],w=b[1],y=Object(n.useState)(v),S=Object(m.a)(y,2),N=S[0],x=S[1],R=Object(n.useState)([]),C=Object(m.a)(R,2),_=C[0],I=C[1],P=function(e){var t=Object(O.a)(f);t.map((function(t){t.potluck_id=e,h().post("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(e,"/items"),t).then((function(e){t.id=e.data.id})).catch((function(e){return console.log("ERROR")}))})),w(t)},D=function(e){var t=Object(O.a)(_);t.map((function(t){t.potluck_id=e,h().post("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(e,"/guests"),t).then((function(e){t.id=e.data.id})).catch((function(e){return console.log("ERROR")}))})),x(t)},q=function(e){e.preventDefault(),r(Object(E.a)(Object(E.a)({},l),{},Object(g.a)({},e.target.name,e.target.value)))};return c.a.createElement("div",{className:"potluck-wrapper"},c.a.createElement("h1",null,"Potluck"),c.a.createElement("form",{className:"details-form"},c.a.createElement("div",{className:"create-potluck"},c.a.createElement("input",{placeholder:"Name",type:"text",name:"name",value:l.name,onChange:q}),c.a.createElement("input",{placeholder:"Location",type:"text",name:"location",value:l.location,onChange:q}),c.a.createElement("input",{placeholder:"Date",type:"text",name:"date",value:l.date,onChange:q}),c.a.createElement("input",{placeholder:"Time",type:"text",name:"time",value:l.time,onChange:q})),c.a.createElement("div",{className:"food"},c.a.createElement("h3",null,"Food:"),c.a.createElement("input",{placeholder:"Dish",type:"text",name:"item_name",value:s.item_name,onChange:function(e){e.preventDefault(),p(Object(E.a)(Object(E.a)({},s),{},Object(g.a)({},e.target.name,e.target.value)))}}),c.a.createElement("button",{className:"Btn",onClick:function(e){e.preventDefault(),w([].concat(Object(O.a)(f),[s])),p(Object(E.a)({},k))}},"Add Item"),f.map((function(e){return c.a.createElement("p",{key:e.item_name},c.a.createElement("span",{role:"img","aria-label":""},"\ud83c\udf57"),"  ",e.item_name,c.a.createElement("span",{role:"img","aria-label":""}," \ud83c\udf2d "),c.a.createElement("br",null))}))),c.a.createElement("div",{className:"guests"},c.a.createElement("h3",null,"Guests:"),c.a.createElement("input",{placeholder:"Guests",type:"text",name:"guest_name",value:N.guest_name,onChange:function(e){e.preventDefault(),x(Object(E.a)(Object(E.a)({},N),{},Object(g.a)({},e.target.name,e.target.value)))}}),c.a.createElement("button",{className:"Btn",onClick:function(e){e.preventDefault(),I([].concat(Object(O.a)(_),[N])),x(Object(E.a)({},N))}},"Add Guests"),_.map((function(e){return c.a.createElement("p",{key:e.guest_name},c.a.createElement("span",{role:"img","aria-label":""},"\ud83c\udf57"),"  ",e.guest_name,c.a.createElement("span",{role:"img","aria-label":""}," \ud83c\udf2d "),c.a.createElement("br",null))}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("button",{className:"Btn",onClick:function(t){t.preventDefault();var a=localStorage.getItem("userId");console.log("userId:"+a),h().post("https://potluckplanner1.herokuapp.com/api/users/".concat(a,"/potlucks"),l).then((function(t){h().get("https://potluckplanner1.herokuapp.com/api/potlucks").then((function(t){var a=t.data.filter((function(e){return e.name===l.name}))[0].id;P(a),D(a),e("/")}))})).catch((function(e){return console.log("ERROR")}))}},"Create Potluck")))}var y=a(24),S=a(25),N=a(12),x=N.a().shape({username:N.c().required("Username is required"),password:N.c().required("Password is required")});function R(){var e=Object(y.a)(["\n    display:flex;\n    flex-flow: column;\n    background-color: #FFFFFF;\n    border-radius: 10px;\n    box-shadow: 5px, 2px;\n    margin-right: 30%;\n    margin-left: 30%;\n    background-color: mistyrose;\n    margin-top: 15%;\n\n    p{\n        font-size: 0.8rem;\n    }\n    button{\n        margin-right: 30%;\n        margin-left: 30%;\n    }\n    button{\n        background-color: wheat;\n        border:0.5px solid black;\n    }\n    .loginError{\n        color:red;\n        font-size:0.8rem;\n    }\n    #passInput{\n        margin-left: 0.6%;\n    }\n    \n"]);return R=function(){return e},e}var C=S.a.div(R()),_={username:"",password:""},I={username:"",password:""};function P(){var e=Object(u.g)().push,t=Object(n.useState)(_),a=Object(m.a)(t,2),l=a[0],r=a[1],i=Object(n.useState)(I),s=Object(m.a)(i,2),p=s[0],d=s[1],h=function(e){var t=e.target,a=t.name,n=t.value;N.b(x,a).validate(n).then((function(e){d(Object(E.a)(Object(E.a)({},p),{},Object(g.a)({},a,"")))})).catch((function(e){d(Object(E.a)(Object(E.a)({},p),{},Object(g.a)({},a,e.errors[0])))})),r(Object(E.a)(Object(E.a)({},l),{},Object(g.a)({},a,n)))},f=function(){b.a.post("https://potluckplanner1.herokuapp.com/api/auth/login",{username:l.username,password:l.password}).then((function(t){console.log(t),localStorage.setItem("token",t.data.token),e("/")})).catch((function(e){console.log("The error is ".concat(e))}))};return c.a.createElement(C,{className:"login-container"},c.a.createElement("h2",null,"Potluck Planner"),c.a.createElement("label",null,"Username:",c.a.createElement("input",{type:"text",placeholder:"Username",name:"username",value:l.username,onChange:h}),c.a.createElement("div",{className:"loginError"},p.username)),c.a.createElement("br",null),c.a.createElement("label",null,"Password:",c.a.createElement("input",{id:"passInput",type:"password",placeholder:"Password",name:"password",value:l.password,onChange:h}),c.a.createElement("div",{className:"loginError"},p.password)),c.a.createElement("br",null),c.a.createElement(o.b,{to:"/register"},c.a.createElement("p",null,"Create an account")),c.a.createElement("button",{id:"login-button",onClick:function(e){e.preventDefault(),f(),r(_)}},"Log in"))}var D=N.a().shape({username:N.c().min(8,"Username must be at least 8 characters").required("Username is Required"),password:N.c().min(8,"Password must be at least 8 characters").required("Password is Required")});function q(){var e=Object(y.a)(["\n    color: red;\n    font-style: italic;\n"]);return q=function(){return e},e}function F(){var e=Object(y.a)(["\n    display:flex;\n    flex-direction: column;\n\n    button {\n        width: 1% 5%;\n        margin: 1% 45%;\n    }\n"]);return F=function(){return e},e}var J=S.a.div(F()),B=S.a.div(q()),L={username:"",password:""},U={username:"",password:""},A=[];function G(e){var t=Object(n.useState)(A),a=Object(m.a)(t,2),l=a[0],r=a[1],i=Object(n.useState)(U),s=Object(m.a)(i,2),p=s[0],d=s[1],h=Object(n.useState)(L),f=Object(m.a)(h,2),j=f[0],k=f[1],v=Object(n.useState)(!0),w=Object(m.a)(v,2),y=w[0],S=w[1],x=Object(u.g)(),R=function(e){var t=e.target,a=t.name,n=t.value;N.b(D,a).validate(n).then((function(e){d(Object(E.a)(Object(E.a)({},p),{},Object(g.a)({},a,"")))})).catch((function(e){d(Object(E.a)(Object(E.a)({},p),{},Object(g.a)({},a,e.errors[0])))})),k(Object(E.a)(Object(E.a)({},j),{},Object(g.a)({},a,n)))};return Object(n.useEffect)((function(){D.isValid(j).then((function(e){S(!e)}))}),[j]),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e){b.a.post("https://potluckplanner1.herokuapp.com/api/auth/register",e).then((function(e){r([e.data].concat(Object(O.a)(l))),localStorage.setItem("userId",e.data.data.id),k(L),console.log(e.data,"data sent to server!"),x.push("/login")})).catch((function(e){console.log("Snake eyes")}))}({username:j.username.trim(),password:j.password.trim()})}},c.a.createElement(J,{className:"form-input"},c.a.createElement("h2",null,"Create an account"),c.a.createElement("label",null,"Name:\xa0",c.a.createElement("input",{onChange:R,placeholder:"your name here",name:"username",type:"text"})),c.a.createElement("label",null,"Password:\xa0",c.a.createElement("input",{onChange:R,placeholder:"your password here",name:"password",type:"password"})),c.a.createElement("button",{id:"register-btn",disabled:y},"Register"),c.a.createElement(o.b,{to:"/login"},"Login"),c.a.createElement(o.b,{to:"/register"},"Registration")),c.a.createElement(B,{className:"errors"},c.a.createElement("p",{id:"para-one"},p.username),c.a.createElement("p",{id:"para-two"},p.password)))}var z={name:"",host:"",location:"",date:"",time:""};function T(){var e=Object(n.useState)(z),t=Object(m.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)([]),o=Object(m.a)(r,2),i=o[0],s=o[1],p=Object(n.useState)([]),d=Object(m.a)(p,2),b=d[0],f=d[1],g=Object(n.useState)({}),O=Object(m.a)(g,2),j=O[0],k=O[1],v={},w=Object(u.h)();return Object(n.useEffect)((function(){h().get("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(w.id)).then((function(e){l(e.data)})).catch((function(e){return console.log("ERROR")}))}),[]),Object(n.useEffect)((function(){a.id&&h().get("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(a.id,"/items")).then((function(e){s(e.data)})).catch((function(e){return console.log(e.response)}))}),[a]),Object(n.useEffect)((function(){!function e(t){i.length&&(console.log("items: "+JSON.stringify(i)),console.log("claimed:"+JSON.stringify(j)+" expanded claimed: "+JSON.stringify(Object(E.a)({},j))),h().get("https://potluckplanner1.herokuapp.com/api/items/".concat(i[t].id)).then((function(a){v[i[t].id]=a.data.claimed,t===i.length-1?(console.log("Now setting claimed: "+JSON.stringify(v)),k(Object(E.a)({},v))):(console.log("i: "+t+" items.length: "+i.length),++t<i.length&&e(t))})))}(0)}),[i]),Object(n.useEffect)((function(){a.id&&h().get("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(a.id,"/guests")).then((function(e){f(e.data)})).catch((function(e){return console.log("ERROR")}))}),[a]),a.id?(console.log(i),console.log(a),console.log("claimed: "+JSON.stringify(j)),c.a.createElement("div",{className:"potluck-details"},c.a.createElement("h1",null,"Potluck"),c.a.createElement("h2",null,a.name),c.a.createElement("h2",null,a.host),c.a.createElement("p",null,a.date,c.a.createElement("br",null)),c.a.createElement("p",null,a.time,c.a.createElement("br",null)),c.a.createElement("p",null,a.location,c.a.createElement("br",null)),c.a.createElement("h3",null,"Food Menu"),i.map((function(e){return c.a.createElement("p",{key:e.id},e.item_name," - ",j[e.id]?"claimed":"unclaimed",c.a.createElement("span",null,!j[e.id]&&c.a.createElement("button",null,"Claim")))})),c.a.createElement("h3",null,"Guestlist"),b.map((function(e){return c.a.createElement("p",{key:e.id}," ",e.guest_name," ")})))):c.a.createElement("div",null,"Loading potluck information...")}var M=function(){return c.a.createElement(o.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(u.d,null,c.a.createElement(u.b,{exact:!0,path:"/login",component:P}),c.a.createElement(u.b,{exact:!0,path:"/register",component:G}),c.a.createElement(u.b,{exact:!0,path:"/create-potluck",component:w}),c.a.createElement(s,{exact:!0,path:"/potluck-list",component:f}),c.a.createElement(s,{exact:!0,path:"/potluck/:id",component:T}),c.a.createElement(u.b,{path:"/"},c.a.createElement(u.a,{to:"/potluck-list"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.3ded8839.chunk.js.map