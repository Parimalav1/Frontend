(this.webpackJsonpputlock=this.webpackJsonpputlock||[]).push([[0],{52:function(e,t,n){e.exports=n(79)},57:function(e,t,n){},58:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(44),c=n.n(o),l=(n(57),n(7)),u=n(4),i=(n(58),n(11)),s=n(12);function m(){var e=Object(i.a)(["\n    display:flex;\n    justify-content: space-around;\n    align-items: center;\n    border-bottom: 1px solid black;\n    margin: 0 0 2% 0;\n    nav{\n        display:flex;\n    }\n    button{\n        width: 100px;\n        margin: 1%;\n        padding: 3px;\n        background-color: white;\n        border: 1px solid black;\n        border-radius: 5px;\n        font-size: 1em;\n        :hover{\n            background-color: lightblue;\n        }\n    }\n    .link{\n        width: 100px;\n        text-align: center;\n        margin: 1%;\n        padding: 3px;\n        text-decoration: none;\n        border: 1px solid black;\n        border-radius: 5px;\n        color: black;\n        font-size: 1em;\n        :hover{\n            background-color: lightblue;\n        }\n    }\n"]);return m=function(){return e},e}var p=s.a.div(m()),d=function(){return r.a.createElement(p,null,r.a.createElement("div",null,r.a.createElement("h1",null,"Potluck Planner")),r.a.createElement("nav",null,r.a.createElement("button",{onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("username"),window.location.reload()}},"Logout"),r.a.createElement(l.b,{className:"link",to:"/potluck-list"},"Home"),r.a.createElement(l.b,{className:"link",to:"/create-potluck"},"Host a Potluck")))},g=n(51),b=function(e){var t=e.component,n=Object(g.a)(e,["component"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(e){return localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/login"})}}))},h=n(3);function f(e){var t=e.potluck,n=Object(u.g)().push,a=["pasta","noodles","pizza","dimsum","burger","hotdog","soda","chips","idli","cake","sandwich","pie","icecream","chicken wings"],o=Math.floor(Math.random()*a.length);console.log("randomNum: "+o);var c="https://source.unsplash.com/random/200x150/?".concat(a[o]);return r.a.createElement("div",null,r.a.createElement("button",{className:"Btn",onClick:function(){return n("/potluck/".concat(t.id),t)}},r.a.createElement("img",{src:c}),r.a.createElement("h2",null,t.name),r.a.createElement("h2",null,t.host),r.a.createElement("p",null,t.date,r.a.createElement("br",null)),r.a.createElement("p",null,t.time,r.a.createElement("br",null)),r.a.createElement("p",null,t.location,r.a.createElement("br",null))))}var E=n(23),O=n.n(E),k=function(){var e=localStorage.getItem("token");return console.log("token: "+e),O.a.create({headers:{Authorization:e},baseURL:"https://potluckplanner1.herokuapp.com"})};function v(){var e=Object(i.a)(["\nwidth: 80%;\nmargin: auto;\npadding: 20px 20px;\ntext-align: center;\nborder: 3px solid mistyrose;\nborder-radius: 6px;\n\nbutton {\n    padding: 5px 5px;\n    margin: 10px 10px;\n    color: blue;\n    font-weight: bold;\n    background-color: mistyrose;\n    border: 1px solid black;\n    border-radius: 4px;\n    :hover{\n        background-color: lightblue;\n    }\n}\ninput {\n    border: 1px solid black;\n    font-weight: bold;\n    padding: 5px 5px;\n    margin: 10px 10px;\n}\n"]);return v=function(){return e},e}function j(){var e=Object(i.a)(["\nwidth: 80%;\nmargin: auto;\npadding: 20px 20px;\ntext-align: center;\nborder: 3px solid mistyrose;\nborder-radius: 6px;\n\nbutton {\n    padding: 5px 5px;\n    margin: 10px 10px;\n    color: blue;\n    background-color: mistyrose;\n    border: 1px solid black;\n    border-radius: 4px;\n    :hover{\n        background-color: lightblue;\n    }\n}\n"]);return j=function(){return e},e}function x(){var e=Object(i.a)(["\nwidth: 40%;\nmargin-left: 5%;\n.Btn {\n    width: 100%;\n    margin: 10px;\n}\n"]);return x=function(){return e},e}function w(){var e=Object(i.a)(["\nwidth: 80%;\nmargin: auto;\ndisplay: flex;\nflex-wrap: wrap;\nalign-items: center;\nposition: relative;\n// background-image: linear-gradient(lightyellow, #faf54e);\nbackground-image: linear-gradient( light green, green);\nborder-radius: 20px;\npadding: 16px;\nbox-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n"]);return w=function(){return e},e}var y=s.a.div(w()),S=s.a.div(x()),N=s.a.div(j()),R=s.a.div(v()),I=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){k().get("https://potluckplanner1.herokuapp.com/api/potlucks").then((function(e){o(e.data)})).catch((function(e){return console.log("ERROR")}))}),[]),n.length?r.a.createElement(y,null,n.map((function(e){return r.a.createElement(S,{key:e.id},r.a.createElement(f,{potluck:e}))}))):r.a.createElement("div",null,"Loading potluck information...")},C=n(6),_=n(2),P=n(19),D={name:"",location:"",date:"",time:""},J={item_name:"",claimed:0,potluck_id:""},z={guest_name:""};function F(){var e=Object(u.g)().push,t=Object(a.useState)(D),n=Object(h.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(J),i=Object(h.a)(l,2),s=i[0],m=i[1],p=Object(a.useState)([]),d=Object(h.a)(p,2),g=d[0],b=d[1],f=Object(a.useState)(z),E=Object(h.a)(f,2),O=E[0],v=E[1],j=Object(a.useState)([]),x=Object(h.a)(j,2),w=x[0],y=x[1],S=function(e){var t=Object(P.a)(g),n=[];t.map((function(t){t.potluck_id=e,n.push(k().post("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(e,"/items"),t).then((function(e){return console.log(e,"This is the food item"),t.id=e.data.id,e.data.id})).catch((function(e){return console.log("ERROR")})))})),Promise.all(n).then((function(e){for(var n=0;n<e.length;n++)t[n].id=e[n];b(t)}))},N=function(e){var t=Object(P.a)(w);console.log("newGuestList: "+JSON.stringify(t));var n=[];t.map((function(t){n.push(k().post("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(e,"/guests"),t).then((function(e){return t.id=e.data.id,e.data.id})).catch((function(e){return console.log("ERROR")})))})),Promise.all(n).then((function(e){for(var n=0;n<e.length;n++)t[n].id=e[n];v(t)}))},I=function(e){e.preventDefault(),c(Object(_.a)(Object(_.a)({},o),{},Object(C.a)({},e.target.name,e.target.value)))};return r.a.createElement(R,null,r.a.createElement("h1",null,"Potluck"),r.a.createElement("form",{className:"details-form"},r.a.createElement("div",{className:"create-potluck"},r.a.createElement("input",{placeholder:"Name",type:"text",name:"name",value:o.name,onChange:I}),r.a.createElement("input",{placeholder:"Location",type:"text",name:"location",value:o.location,onChange:I}),r.a.createElement("input",{placeholder:"Date",type:"text",name:"date",value:o.date,onChange:I}),r.a.createElement("input",{placeholder:"Time",type:"text",name:"time",value:o.time,onChange:I})),r.a.createElement("div",{className:"food"},r.a.createElement("h3",null,"Food:"),r.a.createElement("input",{placeholder:"Dish",type:"text",name:"item_name",value:s.item_name,onChange:function(e){e.preventDefault(),m(Object(_.a)(Object(_.a)({},s),{},Object(C.a)({},e.target.name,e.target.value)))}}),r.a.createElement("button",{className:"Btn",onClick:function(e){e.preventDefault(),b([].concat(Object(P.a)(g),[s])),m(Object(_.a)({},J))}},"Add Item"),g.map((function(e){return r.a.createElement("p",{key:e.item_name},r.a.createElement("span",{role:"img","aria-label":""},"\ud83c\udf57"),"  ",e.item_name,r.a.createElement("span",{role:"img","aria-label":""}," \ud83c\udf2d "),r.a.createElement("br",null))}))),r.a.createElement("div",{className:"guests"},r.a.createElement("h3",null,"Guests:"),r.a.createElement("input",{placeholder:"Guests",type:"text",name:"guest_name",value:O.guest_name,onChange:function(e){e.preventDefault(),v(Object(_.a)(Object(_.a)({},O),{},Object(C.a)({},e.target.name,e.target.value)))}}),r.a.createElement("button",{className:"Btn",onClick:function(e){e.preventDefault(),y([].concat(Object(P.a)(w),[O])),v(Object(_.a)({},O))}},"Add Guests"),w.map((function(e){return r.a.createElement("p",{key:e.guest_name},r.a.createElement("span",{role:"img","aria-label":""},"\ud83c\udf57"),"  ",e.guest_name,r.a.createElement("span",{role:"img","aria-label":""}," \ud83c\udf2d "),r.a.createElement("br",null))}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"Btn",onClick:function(t){t.preventDefault();var n=localStorage.getItem("userId");console.log("userId:"+n),k().post("https://potluckplanner1.herokuapp.com/api/users/".concat(n,"/potlucks"),o).then((function(t){k().get("https://potluckplanner1.herokuapp.com/api/potlucks").then((function(t){var n=t.data.filter((function(e){return e.name===o.name}))[0].id;S(n),N(n),e("/")}))})).catch((function(e){return console.log("ERROR")}))}},"Create Potluck")))}var L=n(14),q=L.a().shape({username:L.c().required("Username is required"),password:L.c().required("Password is required")});function B(){var e=Object(i.a)(["\n    text-align: center;\n    display:flex;\n    flex-flow: column;\n    background-color: #FFFFFF;\n    border-radius: 10px;\n    box-shadow: 5px, 2px;\n    margin-right: 30%;\n    margin-left: 30%;\n    background-color: mistyrose;\n    margin-top: 15%;\n\n    p{\n        font-size: 0.8rem;\n    }\n    button{\n        margin: 20px 30%;\n    }\n    button{\n        background-color: wheat;\n        border:0.5px solid black;\n    }\n    .loginError{\n        color:red;\n        font-size:0.8rem;\n    }\n    #passInput{\n        margin-left: 0.6%;\n    }\n    \n"]);return B=function(){return e},e}var G=s.a.div(B()),U={username:"",password:""},A={username:"",password:""};function M(){var e=Object(u.g)().push,t=Object(a.useState)(U),n=Object(h.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(A),s=Object(h.a)(i,2),m=s[0],p=s[1],d=function(e){var t=e.target,n=t.name,a=t.value;L.b(q,n).validate(a).then((function(e){p(Object(_.a)(Object(_.a)({},m),{},Object(C.a)({},n,"")))})).catch((function(e){p(Object(_.a)(Object(_.a)({},m),{},Object(C.a)({},n,e.errors[0])))})),c(Object(_.a)(Object(_.a)({},o),{},Object(C.a)({},n,a)))},g=function(){k().post("api/auth/login",o).then((function(t){console.log(t),localStorage.setItem("token",t.data.token),localStorage.setItem("username",o.username),k().get("https://potluckplanner1.herokuapp.com/api/users").then((function(e){e.data.map((function(e){e.username===o.username&&(localStorage.setItem("userId",e.id),console.log("Found the user"))}))})),e("/potluck-list")})).catch((function(e){return console.log("The error is ".concat(e))}))};return r.a.createElement(G,{className:"login-container"},r.a.createElement("h2",null,"LOGIN"),r.a.createElement("label",null,"Username:",r.a.createElement("input",{type:"text",placeholder:"Username",name:"username",value:o.username,onChange:d}),r.a.createElement("div",{className:"loginError"},m.username)),r.a.createElement("br",null),r.a.createElement("label",null,"Password:",r.a.createElement("input",{id:"passInput",type:"password",placeholder:"Password",name:"password",value:o.password,onChange:d}),r.a.createElement("div",{className:"loginError"},m.password)),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/register"},r.a.createElement("p",null,"Create an account")),r.a.createElement("button",{id:"login-button",onClick:function(e){e.preventDefault(),g(),c(U)}},"Log in"))}var T=L.a().shape({username:L.c().min(8,"Username must be at least 8 characters").required("Username is Required"),password:L.c().min(8,"Password must be at least 8 characters").required("Password is Required")});function H(){var e=Object(i.a)(["\n    font-size: 0.8rem;\n    color: red;\n    font-style: italic;\n"]);return H=function(){return e},e}function W(){var e=Object(i.a)(["\n    text-align: center;\n    display:flex;\n    flex-flow: column;\n    background-color: mistyrose;\n    margin-right: 30%;\n    margin-left: 30%;\n    background-color: mistyrose;\n    margin-top: 15%;\n\n    label {\n        margin: 2% 0%;\n    }\n\n    button {\n        border:0.5px solid black;\n        background-color: wheat;\n        width: 50%;\n        margin: 20px 30%;\n    }\n\n    p {\n        font-size: 0.8rem;\n    }\n\n"]);return W=function(){return e},e}var V=s.a.div(W()),Y=s.a.div(H()),$={username:"",password:""},K={username:"",password:""},Q=[];function X(e){var t=Object(a.useState)(Q),n=Object(h.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(K),s=Object(h.a)(i,2),m=s[0],p=s[1],d=Object(a.useState)($),g=Object(h.a)(d,2),b=g[0],f=g[1],E=Object(a.useState)(!0),k=Object(h.a)(E,2),v=k[0],j=k[1],x=Object(u.g)(),w=function(e){var t=e.target,n=t.name,a=t.value;L.b(T,n).validate(a).then((function(e){p(Object(_.a)(Object(_.a)({},m),{},Object(C.a)({},n,"")))})).catch((function(e){p(Object(_.a)(Object(_.a)({},m),{},Object(C.a)({},n,e.errors[0])))})),f(Object(_.a)(Object(_.a)({},b),{},Object(C.a)({},n,a)))};return Object(a.useEffect)((function(){T.isValid(b).then((function(e){j(!e)}))}),[b]),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e){O.a.post("https://potluckplanner1.herokuapp.com/api/auth/register",e).then((function(e){c([e.data].concat(Object(P.a)(o))),localStorage.setItem("userId",e.data.data.id),localStorage.setItem("username",e.data.data.username),f($),console.log(e.data,"data sent to server!"),x.push("/login")})).catch((function(e){console.log("Snake eyes")}))}({username:b.username.trim(),password:b.password.trim()})}},r.a.createElement(V,{className:"form-input"},r.a.createElement("h2",null,"Create An Account"),r.a.createElement("label",null,"Name:\xa0",r.a.createElement("input",{onChange:w,placeholder:"your name here",name:"username",type:"text"})),r.a.createElement("label",null,"Password:\xa0",r.a.createElement("input",{onChange:w,placeholder:"your password here",name:"password",type:"password"})),r.a.createElement(l.b,{to:"/login"},r.a.createElement("p",null,"Login")),r.a.createElement("button",{id:"register-btn",disabled:v},"Register")),r.a.createElement(Y,{className:"errors"},r.a.createElement("p",{id:"para-one"},m.username),r.a.createElement("p",{id:"para-two"},m.password)))}var Z={name:"",host:"",location:"",date:"",time:""};function ee(){var e=Object(a.useState)(Z),t=Object(h.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)([]),l=Object(h.a)(c,2),i=l[0],s=l[1],m=Object(a.useState)([]),p=Object(h.a)(m,2),d=p[0],g=p[1],b=Object(a.useState)({}),f=Object(h.a)(b,2),E=f[0],O=f[1],v=Object(a.useState)({}),j=Object(h.a)(v,2),x=j[0],w=j[1],y={},S=Object(u.h)();Object(a.useEffect)((function(){k().get("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(S.id)).then((function(e){o(e.data)})).catch((function(e){return console.log("ERROR")}))}),[]),Object(a.useEffect)((function(){n.id&&k().get("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(n.id,"/items")).then((function(e){s(e.data)})).catch((function(e){return console.log(e.response)}))}),[n]),Object(a.useEffect)((function(){!function e(t){i.length&&(console.log("items: "+JSON.stringify(i)),console.log("claimed:"+JSON.stringify(E)+" expanded claimed: "+JSON.stringify(Object(_.a)({},E))),k().get("https://potluckplanner1.herokuapp.com/api/items/".concat(i[t].id)).then((function(n){y[i[t].id]=n.data.claimed,t===i.length-1?(console.log("Now setting claimed: "+JSON.stringify(y)),O(Object(_.a)({},y))):(console.log("i: "+t+" items.length: "+i.length),++t<i.length&&e(t))})))}(0)}),[i]),Object(a.useEffect)((function(){n.id&&k().get("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(n.id,"/guests")).then((function(e){g(e.data)})).catch((function(e){return console.log("ERROR")}))}),[n]),Object(a.useEffect)((function(){R()}),[E]);var R=function(){var e=[];Object.values(E).map((function(t){0!==t&&e.push(k().get("https://potluckplanner1.herokuapp.com/api/users/".concat(t)).then((function(e){return Object(C.a)({},t,e.data.username)})).catch((function(e){return console.log("ERROR")})))})),Promise.all(e).then((function(e){var t={};for(var n in e)t=Object(_.a)(Object(_.a)({},t),e[n]);w(t),console.log("newDict:"+JSON.stringify(t))}))};return n.id?(console.log(i),console.log(n),console.log("claimed: "+JSON.stringify(E)),console.log("userIdName: "+JSON.stringify(x)),r.a.createElement(N,null,r.a.createElement("h1",null,"Potluck"),r.a.createElement("h2",null,n.name),r.a.createElement("h2",null,n.host),r.a.createElement("p",null,n.date,r.a.createElement("br",null)),r.a.createElement("p",null,n.time,r.a.createElement("br",null)),r.a.createElement("p",null,n.location,r.a.createElement("br",null)),r.a.createElement("h3",null,"Food Menu"),r.a.createElement("div",null,i.map((function(e){return r.a.createElement("p",{key:e.id},e.item_name," - ",E[e.id]&&x[E[e.id]]?"claimed by ".concat(x[E[e.id]]):"unclaimed",r.a.createElement("span",null,!E[e.id]&&r.a.createElement("button",{onClick:function(){return t=e.id,void(-1!==d.map((function(e){return e.guest_name})).indexOf(localStorage.getItem("username"))?k().put("https://potluckplanner1.herokuapp.com/api/items/".concat(t),{claimed:localStorage.getItem("userId")}).then((function(e){O(Object(_.a)(Object(_.a)({},E),{},Object(C.a)({},t,localStorage.getItem("userId"))))})).catch((function(e){return console.log("ERROR")})):alert("You are not on the guestlist, so you can't claim"));var t}},"Claim")))}))),r.a.createElement("h3",null,"Guestlist"),d.map((function(e){return r.a.createElement("p",{key:e.id}," ",e.guest_name," - ",function(e){var t=Object.values(E).map((function(e){return x[e]}));return console.log(t),-1!==t.indexOf(e)}(e.guest_name)?"confirmed":"pending")})))):r.a.createElement("div",null,"Loading potluck information...")}var te=function(){return r.a.createElement(l.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(d,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/login",component:M}),r.a.createElement(u.b,{exact:!0,path:"/register",component:X}),r.a.createElement(b,{exact:!0,path:"/create-potluck",component:F}),r.a.createElement(b,{exact:!0,path:"/potluck-list",component:I}),r.a.createElement(b,{exact:!0,path:"/potluck/:id",component:ee}),r.a.createElement(u.b,{path:"/"},r.a.createElement(u.a,{to:"/potluck-list"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.fa4dad4c.chunk.js.map