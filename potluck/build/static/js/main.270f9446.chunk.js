(this.webpackJsonpputlock=this.webpackJsonpputlock||[]).push([[0],{52:function(e,t,n){e.exports=n(79)},57:function(e,t,n){},58:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(44),l=n.n(o),r=(n(57),n(7)),u=n(4),i=(n(58),n(16)),s=n(17);function m(){var e=Object(i.a)(["\n    display:flex;\n    justify-content: space-around;\n    align-items: center;\n    border-bottom: 1px solid black;\n    margin: 0 0 2% 0;\n    nav{\n        display:flex;\n    }\n    button{\n        width: 1% 5%;\n        margin: 1%;\n        padding: 3px;\n        background-color: white;\n        border: 1px solid black;\n        border-radius: 5px;\n        font-size: 1em;\n        :hover{\n            background-color: lightblue;\n        }\n    }\n    .link{\n        width: 1% 5%;\n        margin: 1%;\n        padding: 3px;\n        text-decoration: none;\n        border: 1px solid black;\n        border-radius: 5px;\n        color: black;\n        font-size: 1em;\n        :hover{\n            background-color: lightblue;\n        }\n    }\n"]);return m=function(){return e},e}var p=s.a.div(m()),d=function(){return c.a.createElement(p,null,c.a.createElement("div",null,c.a.createElement("h1",null,"Potluck Planner")),c.a.createElement("nav",null,c.a.createElement("button",{onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("userId"),window.location.reload()}},"Logout"),c.a.createElement(r.b,{className:"link",to:"/potluck-list"},"Home"),c.a.createElement(r.b,{className:"link",to:"/create-potluck"},"Host a Potluck")))},b=n(51),g=function(e){var t=e.component,n=Object(b.a)(e,["component"]);return c.a.createElement(u.b,Object.assign({},n,{render:function(e){return localStorage.getItem("token")?c.a.createElement(t,e):c.a.createElement(u.a,{to:"/login"})}}))},f=n(3);function h(e){var t=e.potluck,n=Object(u.g)().push;return c.a.createElement("div",null,c.a.createElement("button",{className:"Btn",onClick:function(){return n("/potluck/".concat(t.id),t)}},c.a.createElement("h1",null,"Potluck"),c.a.createElement("h2",null,t.name),c.a.createElement("h2",null,t.host),c.a.createElement("p",null,t.date,c.a.createElement("br",null)),c.a.createElement("p",null,t.time,c.a.createElement("br",null)),c.a.createElement("p",null,t.location,c.a.createElement("br",null))))}var E=n(23),O=n.n(E),k=function(){var e=localStorage.getItem("token");return console.log("token: "+e),O.a.create({headers:{Authorization:e},baseURL:"https://potluckplanner1.herokuapp.com"})},j=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){k().get("https://potluckplanner1.herokuapp.com/api/potlucks").then((function(e){o(e.data)})).catch((function(e){return console.log("ERROR")}))}),[]),n.length?c.a.createElement("div",{className:"potluck-list"},n.map((function(e){return c.a.createElement("div",{key:e.id},c.a.createElement(h,{potluck:e}))}))):c.a.createElement("div",null,"Loading potluck information...")},v=n(6),w=n(2),y=n(19),x={name:"",location:"",date:"",time:""},S={item_name:"",claimed:0,potluck_id:""},N={guest_name:""};function R(){var e=Object(u.g)().push,t=Object(a.useState)(x),n=Object(f.a)(t,2),o=n[0],l=n[1],r=Object(a.useState)(S),i=Object(f.a)(r,2),s=i[0],m=i[1],p=Object(a.useState)([]),d=Object(f.a)(p,2),b=d[0],g=d[1],h=Object(a.useState)(N),E=Object(f.a)(h,2),O=E[0],j=E[1],R=Object(a.useState)([]),C=Object(f.a)(R,2),I=C[0],P=C[1],_=function(e){var t=Object(y.a)(b);t.map((function(t){t.potluck_id=e,k().post("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(e,"/items"),t).then((function(e){t.id=e.data.id})).catch((function(e){return console.log("ERROR")}))})),g(t)},D=function(e){var t=Object(y.a)(I);t.map((function(t){t.potluck_id=e,k().post("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(e,"/guests"),t).then((function(e){t.id=e.data.id})).catch((function(e){return console.log("ERROR")}))})),j(t)},J=function(e){e.preventDefault(),l(Object(w.a)(Object(w.a)({},o),{},Object(v.a)({},e.target.name,e.target.value)))};return c.a.createElement("div",{className:"potluck-wrapper"},c.a.createElement("h1",null,"Potluck"),c.a.createElement("form",{className:"details-form"},c.a.createElement("div",{className:"create-potluck"},c.a.createElement("input",{placeholder:"Name",type:"text",name:"name",value:o.name,onChange:J}),c.a.createElement("input",{placeholder:"Location",type:"text",name:"location",value:o.location,onChange:J}),c.a.createElement("input",{placeholder:"Date",type:"text",name:"date",value:o.date,onChange:J}),c.a.createElement("input",{placeholder:"Time",type:"text",name:"time",value:o.time,onChange:J})),c.a.createElement("div",{className:"food"},c.a.createElement("h3",null,"Food:"),c.a.createElement("input",{placeholder:"Dish",type:"text",name:"item_name",value:s.item_name,onChange:function(e){e.preventDefault(),m(Object(w.a)(Object(w.a)({},s),{},Object(v.a)({},e.target.name,e.target.value)))}}),c.a.createElement("button",{className:"Btn",onClick:function(e){e.preventDefault(),g([].concat(Object(y.a)(b),[s])),m(Object(w.a)({},S))}},"Add Item"),b.map((function(e){return c.a.createElement("p",{key:e.item_name},c.a.createElement("span",{role:"img","aria-label":""},"\ud83c\udf57"),"  ",e.item_name,c.a.createElement("span",{role:"img","aria-label":""}," \ud83c\udf2d "),c.a.createElement("br",null))}))),c.a.createElement("div",{className:"guests"},c.a.createElement("h3",null,"Guests:"),c.a.createElement("input",{placeholder:"Guests",type:"text",name:"guest_name",value:O.guest_name,onChange:function(e){e.preventDefault(),j(Object(w.a)(Object(w.a)({},O),{},Object(v.a)({},e.target.name,e.target.value)))}}),c.a.createElement("button",{className:"Btn",onClick:function(e){e.preventDefault(),P([].concat(Object(y.a)(I),[O])),j(Object(w.a)({},O))}},"Add Guests"),I.map((function(e){return c.a.createElement("p",{key:e.guest_name},c.a.createElement("span",{role:"img","aria-label":""},"\ud83c\udf57"),"  ",e.guest_name,c.a.createElement("span",{role:"img","aria-label":""}," \ud83c\udf2d "),c.a.createElement("br",null))}))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("button",{className:"Btn",onClick:function(t){t.preventDefault();var n=localStorage.getItem("userId");console.log("userId:"+n),k().post("https://potluckplanner1.herokuapp.com/api/users/".concat(n,"/potlucks"),o).then((function(t){k().get("https://potluckplanner1.herokuapp.com/api/potlucks").then((function(t){var n=t.data.filter((function(e){return e.name===o.name}))[0].id;_(n),D(n),e("/")}))})).catch((function(e){return console.log("ERROR")}))}},"Create Potluck")))}var C=n(12),I=C.a().shape({username:C.c().required("Username is required"),password:C.c().required("Password is required")});function P(){var e=Object(i.a)(["\n    display:flex;\n    flex-flow: column;\n    background-color: #FFFFFF;\n    border-radius: 10px;\n    box-shadow: 5px, 2px;\n    margin-right: 30%;\n    margin-left: 30%;\n    background-color: mistyrose;\n    margin-top: 15%;\n\n    p{\n        font-size: 0.8rem;\n    }\n    button{\n        margin-right: 30%;\n        margin-left: 30%;\n    }\n    button{\n        background-color: wheat;\n        border:0.5px solid black;\n    }\n    .loginError{\n        color:red;\n        font-size:0.8rem;\n    }\n    #passInput{\n        margin-left: 0.6%;\n    }\n    \n"]);return P=function(){return e},e}var _=s.a.div(P()),D={username:"",password:""},J={username:"",password:""};function q(){var e=Object(u.g)().push,t=Object(a.useState)(D),n=Object(f.a)(t,2),o=n[0],l=n[1],i=Object(a.useState)(J),s=Object(f.a)(i,2),m=s[0],p=s[1],d=function(e){var t=e.target,n=t.name,a=t.value;C.b(I,n).validate(a).then((function(e){p(Object(w.a)(Object(w.a)({},m),{},Object(v.a)({},n,"")))})).catch((function(e){p(Object(w.a)(Object(w.a)({},m),{},Object(v.a)({},n,e.errors[0])))})),l(Object(w.a)(Object(w.a)({},o),{},Object(v.a)({},n,a)))},b=function(){k().post("api/auth/login",o).then((function(t){console.log(t),localStorage.setItem("token",t.data.token),localStorage.setItem("username",o.username),e("/potluck-list")})).catch((function(e){return console.log("The error is ".concat(e))}))};return c.a.createElement(_,{className:"login-container"},c.a.createElement("h2",null,"Potluck Planner"),c.a.createElement("label",null,"Username:",c.a.createElement("input",{type:"text",placeholder:"Username",name:"username",value:o.username,onChange:d}),c.a.createElement("div",{className:"loginError"},m.username)),c.a.createElement("br",null),c.a.createElement("label",null,"Password:",c.a.createElement("input",{id:"passInput",type:"password",placeholder:"Password",name:"password",value:o.password,onChange:d}),c.a.createElement("div",{className:"loginError"},m.password)),c.a.createElement("br",null),c.a.createElement(r.b,{to:"/register"},c.a.createElement("p",null,"Create an account")),c.a.createElement("button",{id:"login-button",onClick:function(e){e.preventDefault(),b(),l(D)}},"Log in"))}var F=C.a().shape({username:C.c().min(8,"Username must be at least 8 characters").required("Username is Required"),password:C.c().min(8,"Password must be at least 8 characters").required("Password is Required")});function z(){var e=Object(i.a)(["\n    font-size: 0.8rem;\n    color: red;\n    font-style: italic;\n"]);return z=function(){return e},e}function L(){var e=Object(i.a)(["\n    display:flex;\n    flex-flow: column;\n    background-color: mistyrose;\n    margin-right: 30%;\n    margin-left: 30%;\n    background-color: mistyrose;\n    margin-top: 15%;\n\n    label {\n        margin: 2% 0%;\n    }\n\n    button {\n        border:0.5px solid black;\n        background-color: wheat;\n        width: 50%;\n        margin-top: 1%;\n        margin-left:  25%;\n        margin-right:  25%;\n    }\n\n    p {\n        font-size: 0.8rem;\n    }\n\n"]);return L=function(){return e},e}var A=s.a.div(L()),B=s.a.div(z()),U={username:"",password:""},G={username:"",password:""},H=[];function M(e){var t=Object(a.useState)(H),n=Object(f.a)(t,2),o=n[0],l=n[1],i=Object(a.useState)(G),s=Object(f.a)(i,2),m=s[0],p=s[1],d=Object(a.useState)(U),b=Object(f.a)(d,2),g=b[0],h=b[1],E=Object(a.useState)(!0),k=Object(f.a)(E,2),j=k[0],x=k[1],S=Object(u.g)(),N=function(e){var t=e.target,n=t.name,a=t.value;C.b(F,n).validate(a).then((function(e){p(Object(w.a)(Object(w.a)({},m),{},Object(v.a)({},n,"")))})).catch((function(e){p(Object(w.a)(Object(w.a)({},m),{},Object(v.a)({},n,e.errors[0])))})),h(Object(w.a)(Object(w.a)({},g),{},Object(v.a)({},n,a)))};return Object(a.useEffect)((function(){F.isValid(g).then((function(e){x(!e)}))}),[g]),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e){O.a.post("https://potluckplanner1.herokuapp.com/api/auth/register",e).then((function(e){l([e.data].concat(Object(y.a)(o))),localStorage.setItem("userId",e.data.data.id),h(U),console.log(e.data,"data sent to server!"),S.push("/login")})).catch((function(e){console.log("Snake eyes")}))}({username:g.username.trim(),password:g.password.trim()})}},c.a.createElement(A,{className:"form-input"},c.a.createElement("h2",null,"Create An Account"),c.a.createElement("label",null,"Name:\xa0",c.a.createElement("input",{onChange:N,placeholder:"your name here",name:"username",type:"text"})),c.a.createElement("label",null,"Password:\xa0",c.a.createElement("input",{onChange:N,placeholder:"your password here",name:"password",type:"password"})),c.a.createElement(r.b,{to:"/login"},c.a.createElement("p",null,"Login")),c.a.createElement("button",{id:"register-btn",disabled:j},"Register")),c.a.createElement(B,{className:"errors"},c.a.createElement("p",{id:"para-one"},m.username),c.a.createElement("p",{id:"para-two"},m.password)))}var T={name:"",host:"",location:"",date:"",time:""};function W(){var e=Object(a.useState)(T),t=Object(f.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)([]),r=Object(f.a)(l,2),i=r[0],s=r[1],m=Object(a.useState)([]),p=Object(f.a)(m,2),d=p[0],b=p[1],g=Object(a.useState)({}),h=Object(f.a)(g,2),E=h[0],O=h[1],j=Object(a.useState)({}),y=Object(f.a)(j,2),x=y[0],S=y[1],N={},R=Object(u.h)();Object(a.useEffect)((function(){k().get("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(R.id)).then((function(e){o(e.data)})).catch((function(e){return console.log("ERROR")}))}),[]),Object(a.useEffect)((function(){n.id&&k().get("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(n.id,"/items")).then((function(e){s(e.data)})).catch((function(e){return console.log(e.response)}))}),[n]),Object(a.useEffect)((function(){!function e(t){i.length&&(console.log("items: "+JSON.stringify(i)),console.log("claimed:"+JSON.stringify(E)+" expanded claimed: "+JSON.stringify(Object(w.a)({},E))),k().get("https://potluckplanner1.herokuapp.com/api/items/".concat(i[t].id)).then((function(n){N[i[t].id]=n.data.claimed,t===i.length-1?(console.log("Now setting claimed: "+JSON.stringify(N)),O(Object(w.a)({},N))):(console.log("i: "+t+" items.length: "+i.length),++t<i.length&&e(t))})))}(0)}),[i]),Object(a.useEffect)((function(){n.id&&k().get("https://potluckplanner1.herokuapp.com/api/potlucks/".concat(n.id,"/guests")).then((function(e){b(e.data)})).catch((function(e){return console.log("ERROR")}))}),[n]),Object(a.useEffect)((function(){C()}),[E]);var C=function(){var e=[];Object.values(E).map((function(t){0!==t&&e.push(k().get("https://potluckplanner1.herokuapp.com/api/users/".concat(t)).then((function(e){return Object(v.a)({},t,e.data.username)})).catch((function(e){return console.log("ERROR")})))})),Promise.all(e).then((function(e){var t={};for(var n in e)t=Object(w.a)(Object(w.a)({},t),e[n]);S(t),console.log("newDict:"+JSON.stringify(t))}))};return n.id?(console.log(i),console.log(n),console.log("claimed: "+JSON.stringify(E)),console.log("userIdName: "+JSON.stringify(x)),c.a.createElement("div",{className:"potluck-details"},c.a.createElement("h1",null,"Potluck"),c.a.createElement("h2",null,n.name),c.a.createElement("h2",null,n.host),c.a.createElement("p",null,n.date,c.a.createElement("br",null)),c.a.createElement("p",null,n.time,c.a.createElement("br",null)),c.a.createElement("p",null,n.location,c.a.createElement("br",null)),c.a.createElement("h3",null,"Food Menu"),c.a.createElement("div",null,i.map((function(e){return c.a.createElement("p",{key:e.id},e.item_name," - ",E[e.id]&&x[E[e.id]]?"claimed by ".concat(x[E[e.id]]):"unclaimed",c.a.createElement("span",null,!E[e.id]&&c.a.createElement("button",{onClick:function(){return t=e.id,void k().put("https://potluckplanner1.herokuapp.com/api/items/".concat(t),{claimed:localStorage.getItem("userId")}).then((function(e){})).catch((function(e){return console.log("ERROR")}));var t}},"Claim")))}))),c.a.createElement("h3",null,"Guestlist"),d.map((function(e){return c.a.createElement("p",{key:e.id}," ",e.guest_name," - ",(t=e.id,-1!==Object.values(E).indexOf(t)?"confirmed":"pending"));var t})))):c.a.createElement("div",null,"Loading potluck information...")}var V=function(){return c.a.createElement(r.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(d,null),c.a.createElement(u.d,null,c.a.createElement(u.b,{exact:!0,path:"/login",component:q}),c.a.createElement(u.b,{exact:!0,path:"/register",component:M}),c.a.createElement(g,{exact:!0,path:"/create-potluck",component:R}),c.a.createElement(g,{exact:!0,path:"/potluck-list",component:j}),c.a.createElement(g,{exact:!0,path:"/potluck/:id",component:W}),c.a.createElement(u.b,{path:"/"},c.a.createElement(u.a,{to:"/potluck-list"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[52,1,2]]]);
//# sourceMappingURL=main.270f9446.chunk.js.map